!function(i,e,s,t){s.swipebox=function(o,n){var a={useCSS:!0,hideBarsDelay:3e3},r=this,d=s(o),o=o,l=o.selector,p=s(l),c=e.createTouch!==t||"ontouchstart"in i||"onmsgesturechange"in i||navigator.msMaxTouchPoints,u=!!i.SVGSVGElement,b='<div id="swipebox-overlay">					<div id="swipebox-slider"></div>					<div id="swipebox-caption"></div>					<div id="swipebox-action">						<a id="swipebox-close"></a>						<a id="swipebox-prev"></a>						<a id="swipebox-next"></a>					</div>			</div>';r.settings={},r.init=function(){r.settings=s.extend({},a,n),p.click(function(i){i.preventDefault(),i.stopPropagation(),index=d.index(s(this)),x.init(index)})};var x={init:function(i){this.build(),this.openSlide(i),this.openImg(i),this.preloadImg(i+1),this.preloadImg(i-1)},build:function(){var e=this;if(s("body").append(b),e.doCssTrans()&&(s("#swipebox-slider").css({"-webkit-transition":"left 0.4s ease","-moz-transition":"left 0.4s ease","-o-transition":"left 0.4s ease","-khtml-transition":"left 0.4s ease",transition:"left 0.4s ease"}),s("#swipebox-overlay").css({"-webkit-transition":"opacity 1s ease","-moz-transition":"opacity 1s ease","-o-transition":"opacity 1s ease","-khtml-transition":"opacity 1s ease",transition:"opacity 1s ease"}),s("#swipebox-action, #swipebox-caption").css({"-webkit-transition":"0.5s","-moz-transition":"0.5s","-o-transition":"0.5s","-khtml-transition":"0.5s",transition:"0.5s"})),u){var t=s("#swipebox-action #swipebox-close").css("background-image");t=t.replace("png","svg"),s("#swipebox-action #swipebox-prev,#swipebox-action #swipebox-next,#swipebox-action #swipebox-close").css({"background-image":t})}d.each(function(){s("#swipebox-slider").append('<div class="slide"></div>')}),e.setDim(),e.actions(),e.keyboard(),e.gesture(),e.animBars(),s(i).resize(function(){e.setDim()}).resize()},setDim:function(){var e={width:s(i).width(),height:i.innerHeight?i.innerHeight:s(i).height()};s("#swipebox-overlay").css(e)},supportTransition:function(){for(var i="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" "),s=0;s<i.length;s++)if(e.createElement("div").style[i[s]]!==t)return i[s];return!1},doCssTrans:function(){return r.settings.useCSS&&this.supportTransition()?!0:void 0},gesture:function(){if(c){var i=this,e=null,t=10,o={},n={},a=s("#swipebox-caption, #swipebox-action");a.addClass("visible-bars"),i.setTimeout(),s("body").bind("touchstart",function(i){return s(this).addClass("touching"),n=i.originalEvent.targetTouches[0],o.pageX=i.originalEvent.targetTouches[0].pageX,s(".touching").bind("touchmove",function(i){i.preventDefault(),i.stopPropagation(),n=i.originalEvent.targetTouches[0]}),!1}).bind("touchend",function(r){r.preventDefault(),r.stopPropagation(),e=n.pageX-o.pageX,e>=t?i.getPrev():-t>=e?i.getNext():a.hasClass("visible-bars")?(i.clearTimeout(),i.hideBars()):(i.showBars(),i.setTimeout()),s(".touching").off("touchmove").removeClass("touching")})}},setTimeout:function(){if(r.settings.hideBarsDelay>0){var e=this;e.clearTimeout(),e.timeout=i.setTimeout(function(){e.hideBars()},r.settings.hideBarsDelay)}},clearTimeout:function(){i.clearTimeout(this.timeout),this.timeout=null},showBars:function(){var i=s("#swipebox-caption, #swipebox-action");this.doCssTrans()?i.addClass("visible-bars"):(s("#swipebox-caption").animate({top:0},500),s("#swipebox-action").animate({bottom:0},500),setTimeout(function(){i.addClass("visible-bars")},1e3))},hideBars:function(){var i=s("#swipebox-caption, #swipebox-action");this.doCssTrans()?i.removeClass("visible-bars"):(s("#swipebox-caption").animate({top:"-50px"},500),s("#swipebox-action").animate({bottom:"-50px"},500),setTimeout(function(){i.removeClass("visible-bars")},1e3))},animBars:function(){var i=this,e=s("#swipebox-caption, #swipebox-action");c||(e.addClass("visible-bars"),i.setTimeout(),s("#swipebox-slider").click(function(){e.hasClass("visible-bars")||(i.showBars(),i.setTimeout())}),s("#swipebox-action").hover(function(){i.showBars(),e.addClass("force-visible-bars"),i.clearTimeout()},function(){e.removeClass("force-visible-bars"),i.setTimeout()}))},keyboard:function(){if(!c){var e=this;s(i).bind("keyup",function(i){i.preventDefault(),i.stopPropagation(),37==i.keyCode?e.getPrev():39==i.keyCode?e.getNext():27==i.keyCode&&e.closeSlide()})}},actions:function(){var i=this;d.length<2?s("#swipebox-prev, #swipebox-next").hide():(s("#swipebox-prev").bind("click touchend",function(e){e.preventDefault(),e.stopPropagation(),i.getPrev(),i.setTimeout()}),s("#swipebox-next").bind("click touchend",function(e){e.preventDefault(),e.stopPropagation(),i.getNext(),i.setTimeout()})),s("#swipebox-close").bind("click touchstart",function(){i.closeSlide()})},setSlide:function(i){var e=s("#swipebox-slider");this.doCssTrans()?e.css({left:100*-i+"%"}):e.animate({left:100*-i+"%"}),s("#swipebox-slider .slide").removeClass("current"),s("#swipebox-slider .slide").eq(i).addClass("current"),this.setTitle(i),s("#swipebox-prev, #swipebox-next").removeClass("disabled"),0==i?s("#swipebox-prev").addClass("disabled"):i==d.length-1&&s("#swipebox-next").addClass("disabled")},openSlide:function(i){s("#swipebox-overlay").show().stop().animate({opacity:1},"slow").addClass("visible"),setTimeout(function(){s("body").addClass("swipebox-overflow-hidden")},1500),this.setSlide(i)},preloadImg:function(i){var e=this;setTimeout(function(){e.openImg(i)},1e3)},openImg:function(i){var e=this;return 0>i||i>=d.length?!1:void e.loadImg(d.eq(i).attr("href"),function(){s("#swipebox-slider .slide").eq(i).html(this)})},setTitle:function(i){d.eq(i).attr("title")&&s("#swipebox-caption").empty().append(d.eq(i).attr("title"))},loadImg:function(i,e){var t=s("<img>").on("load",function(){e.call(t)});t.attr("src",i)},getNext:function(){var i=this;index=s("#swipebox-slider .slide").index(s("#swipebox-slider .slide.current")),index+1<d.length?(index++,i.setSlide(index),i.preloadImg(index+1)):(s("#swipebox-slider").addClass("rightSpring"),setTimeout(function(){s("#swipebox-slider").removeClass("rightSpring")},500))},getPrev:function(){var i=this;index=s("#swipebox-slider .slide").index(s("#swipebox-slider .slide.current")),index>0?(index--,i.setSlide(index),i.preloadImg(index-1)):(s("#swipebox-slider").addClass("leftSpring"),setTimeout(function(){s("#swipebox-slider").removeClass("leftSpring")},500))},closeSlide:function(){var i=this;s("body").removeClass("swipebox-overflow-hidden"),s("#swipebox-overlay").animate({opacity:0},"fast"),setTimeout(function(){s("#swipebox-overlay").removeClass("visible"),i.destroy()},1e3)},destroy:function(){s(i).unbind("keyup"),s(i).unbind("resize"),s("body").unbind(),s("#swipebox-slider").unbind(),s("#swipebox-overlay").remove(),d.removeData("_swipebox")}};r.init()},s.fn.swipebox=function(i){if(!s.data(this,"_swipebox")){var e=new s.swipebox(this,i);this.data("_swipebox",e)}}}(window,document,jQuery);